language: java
jdk:
- oraclejdk8
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
- pip
- directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
script: "./gradlew -iS build -x test"
env:
  global:
    - secure: "VFpP4wuYT56OvXXLjCSHqinr7zkpTtd/XirSXuLPAvlsmim/uPvtO9EIFCWvu+67vBdxKqxTtJOjiDPYYBAlXlLCfYdSHZbExBg1kwT6bVRUHwgAQ4n9+D/n/ZYMD+qeZi/gl3/FDmGsFklN7Wm78H7P++oI6irlO4ZSgkmSpBxf9vP3ntVZB8hEsyzE+wiXMmA9updTv9KQowiF9taU2NITHvo0hF6bcQ4VgJ2nL47b29p6zMARBGl+Y5vl68jdg1E2F04kbBnkSGTHrv9s3dNWR4Ku6M3E+3EuMopHUiAk5o9o715KbrcM9bUTKqHkZtlwkAuM0xTLG3wNbu9EKCWgdDwlNJzu12T2J96GsVSJ6Le7vZXCsSd4LLDvtdg7wWWbmYiS0cCPedwFjzmAL/OR/tl+PTGwcVbK/aI5JEGY83dQivVvB34QCBialyJNz/kWzehvQbc1yTg0q3bi+tFvFEjnbp3FHapL4WYqybce+BHGVB0Dc3kCq8nBN1ZjwCW+dZatIlxhi61bymYPChD8o3sEYL5zqeQCQAGzfPKwk0oeXgl5hs8oYfvtL++WAJAtUOHc2JaVRQj89BQZ0DSc8zhh4ifC1peNpDubyl4ziO+zDuN8lD5/5CD+2jqzWsmLq1d3vV2yJ4LRqw+6NWW3l8Lq6BvgB0g7PJD0Ukc="
before_deploy:
- pip install --user awscli
deploy:
- provider: s3
  skip_cleanup: true
  region: eu-west-1
  bucket: devternity-code
  local_dir: build/distributions
  acl: public_read
after_deploy:
  - aws lambda update-function-code --function-name devternity_ticket_generator --s3-bucket devternity-code --s3-key ticket-generator.zip
notifications:
  slack:
    secure: dLLFxOFL3Lvb6BiTIM4UYxrrGSARmkq0eTxVyg+QTwLCed+s7vAINSihyCcKF0emthEbUsVHPI5HXYevhf93GTV045Xh/Kf46GXRDZXZeKDQkSbgAkfSVwjFdeQc2tSxk9OVNbQcDh78WkxFuZwS6riqi9pzHnKag/UjrnW0iWAhZwROq22ZTyq2H9TlRHnolJCwr8jRVbxaornetc27nJtGZMIB4S0H0khUfP8u3WNZ2J47jet2AVwR6A7EUYJ8MKyUs+PLrNc+adXfW0ZlREuo2XkKzlzQyvqlZTF+/naJ3/JPZRet2T3CgNiSuEBAtvnfgpHP71SCPvphq7CXLC6OgbfRCBgo4J7TgXICalfaQDH3tzqSFaNRalT/X/B04WgFlPh/8UJ6QDkFroATxgkW8aQkQo3L3apvO7+xAiE+tftTwANjEutYkgdz4CwKwBYTnSik+0FNK4qm6czlrnl9ob4eEOxq+kcXhLFZvtO8w5TVhZaO2SIq9S46mfBWnS+9+pfQe/XLL19PqnPrbDbpLuPS/bLy6sCTL3Va1exTLk3gVRBtmFMIkRMP2CaTgYw7aqLVnOotneIS4qIT7lxqs4KNELHGMRXrYgjhMMRiGQeUq+bSCwHncSgYD1+Ey2PT8rM3tWIiF86XWdompyiYKNzJgt8GpJd9cSGdAzA=
