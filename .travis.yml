language: java
jdk:
- oraclejdk8
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
- pip
- directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
script: "./gradlew -iS build -x test"
env:
  global:
    - secure: "LOtRb+DCAHSqGO35AWWb5Hz5dIrRox8Qi3rLxUtB+Z42+L1Oiffi4AhvCCNzRt+fmqbA4vju9O68VwpZwgSckWsWzXAma0WP6YZQUfd3yUZClgTcoDX2vMvlGaMIzzSKMRNlK+HR0Yl9wnk2BZdlcbXzHsZTNbLTG2oicyk+NqE7C8dBcXrjyjDgVyexguKrrUH6BJamC2vFP6I8hbUv6FnhtQfN7lMadA8JESjhnQbz7wDm02AR3NBQ9UGuDxjuHhYFiK+cN3nKix7g6TKN+Ci+ycmsM1+r5vuU/MToAtUwKfEZ+MfBzM9UtPoB1lJ2tFhb35ziwrTZB2BqDXEh+bVTZgX1DMRmdb3X2mgmz1wyWxCk9OsXgQlNuPTEE7kXuaW36v+QSP+Y8IR5t76qNuyBHDpmIXoWJPMomTR8x8xSMylqGMfPEsd8fe3+LiobS0uDu2bnGcgAiN/zQtchSTUc0WpzoS1SxiGrs6Vm8gXEguBkWokWhqlbJ1rQg77AuCyddUAFjdNhjQvO6smrIl+5UTfGHkv85gmRMzlYZGKVftIRe1R7oS0l54nAL6TwadpV7hSqeytZu6o9CoQkz5GKK+KBbpvFbxTzg8pFdNUvb9D9B+XgcOfJmES/C0fFXbDNdLncVZIkKiPijucCB4zjr9qG8nBwPB5kpDeNrn8="
before_deploy:
- pip install --user awscli
deploy:
- provider: s3
  skip_cleanup: true
  region: eu-west-1
  bucket: devternity-code
  local_dir: build/distributions
  acl: public_read
after_deploy:
  - aws lambda update-function-code --function-name devternity_ticket_generator --s3-bucket devternity-code --s3-key ticket-generator.zip
notifications:
  slack:
    secure: dLLFxOFL3Lvb6BiTIM4UYxrrGSARmkq0eTxVyg+QTwLCed+s7vAINSihyCcKF0emthEbUsVHPI5HXYevhf93GTV045Xh/Kf46GXRDZXZeKDQkSbgAkfSVwjFdeQc2tSxk9OVNbQcDh78WkxFuZwS6riqi9pzHnKag/UjrnW0iWAhZwROq22ZTyq2H9TlRHnolJCwr8jRVbxaornetc27nJtGZMIB4S0H0khUfP8u3WNZ2J47jet2AVwR6A7EUYJ8MKyUs+PLrNc+adXfW0ZlREuo2XkKzlzQyvqlZTF+/naJ3/JPZRet2T3CgNiSuEBAtvnfgpHP71SCPvphq7CXLC6OgbfRCBgo4J7TgXICalfaQDH3tzqSFaNRalT/X/B04WgFlPh/8UJ6QDkFroATxgkW8aQkQo3L3apvO7+xAiE+tftTwANjEutYkgdz4CwKwBYTnSik+0FNK4qm6czlrnl9ob4eEOxq+kcXhLFZvtO8w5TVhZaO2SIq9S46mfBWnS+9+pfQe/XLL19PqnPrbDbpLuPS/bLy6sCTL3Va1exTLk3gVRBtmFMIkRMP2CaTgYw7aqLVnOotneIS4qIT7lxqs4KNELHGMRXrYgjhMMRiGQeUq+bSCwHncSgYD1+Ey2PT8rM3tWIiF86XWdompyiYKNzJgt8GpJd9cSGdAzA=
